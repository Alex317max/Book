{"ast":null,"code":"// src/App.js\nimport React,{useState,useEffect,useCallback}from'react';import BookingTab from'./components/BookingTab';import MyBookingsTab from'./components/MyBookingsTab';import AdminTab from'./components/AdminTab';import ProfileModal from'./components/ProfileModal';import{fetchUserProfile,updateUserProfile}from'./api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const UserContext=/*#__PURE__*/React.createContext(null);const App=()=>{var _window$Telegram,_window$Telegram$WebA,_window$Telegram$WebA2,_window$Telegram$WebA3;const[activeTab,setActiveTab]=useState('book');const[currentUser,setCurrentUser]=useState(null);const[needsProfileSetup,setNeedsProfileSetup]=useState(false);const[showEditProfileModal,setShowEditProfileModal]=useState(false);const[profileError,setProfileError]=useState('');const[isLoadingProfile,setIsLoadingProfile]=useState(true);const TG_ID_RAW=(_window$Telegram=window.Telegram)===null||_window$Telegram===void 0?void 0:(_window$Telegram$WebA=_window$Telegram.WebApp)===null||_window$Telegram$WebA===void 0?void 0:(_window$Telegram$WebA2=_window$Telegram$WebA.initDataUnsafe)===null||_window$Telegram$WebA2===void 0?void 0:(_window$Telegram$WebA3=_window$Telegram$WebA2.user)===null||_window$Telegram$WebA3===void 0?void 0:_window$Telegram$WebA3.id;const TG_ID=TG_ID_RAW?parseInt(TG_ID_RAW,10):123456789;const ADMIN_IDS=new Set([860936779,123456789]);const IS_ADMIN=ADMIN_IDS.has(TG_ID);const loadProfile=useCallback(async()=>{setIsLoadingProfile(true);setProfileError('');setNeedsProfileSetup(false);setShowEditProfileModal(false);try{console.log(\"Fetching user profile...\");const userProfile=await fetchUserProfile();console.log(\"User profile fetched:\",userProfile);setCurrentUser(userProfile);// ОБНОВЛЕННАЯ ЛОГИКА: Обязательная настройка, если display_name пуст\nif(!userProfile.display_name){console.log(\"User display_name is missing, needs setup.\");setNeedsProfileSetup(true);}else{console.log(\"User display_name is present:\",userProfile.display_name);}}catch(error){console.error(\"Ошибка загрузки профиля:\",error);setProfileError(`Не удалось загрузить профиль: ${error.message}. Попробуйте перезагрузить приложение.`);}finally{setIsLoadingProfile(false);}},[]);useEffect(()=>{// Инициализируем Telegram Web App для получения актуальных данных пользователя\nif(window.Telegram&&window.Telegram.WebApp){window.Telegram.WebApp.ready();// Можно добавить задержку, если initDataUnsafe не сразу доступна\n// setTimeout(loadProfile, 100); \nloadProfile();}else{// Если не в Telegram, или для локальной разработки\nconsole.warn(\"Telegram WebApp not found, using fallback for profile loading.\");loadProfile();}},[loadProfile]);// loadProfile теперь в зависимостях, но он useCallback\nconst handleProfileSubmit=async newName=>{setProfileError('');try{console.log(\"Submitting new profile name:\",newName);const updatedProfile=await updateUserProfile(newName);console.log(\"Profile updated:\",updatedProfile);setCurrentUser(updatedProfile);setNeedsProfileSetup(false);setShowEditProfileModal(false);}catch(error){console.error(\"Ошибка обновления профиля:\",error);setProfileError(error.message||'Не удалось сохранить имя. Попробуйте еще раз.');}};const handleTabClick=tabName=>{setActiveTab(tabName);};const EditProfileButton=()=>/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-outline-secondary ms-auto\",onClick:()=>{setProfileError('');setShowEditProfileModal(true);},title:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0438\\u043C\\u044F\",children:[(currentUser===null||currentUser===void 0?void 0:currentUser.effective_display_name)||'Профиль',\" \",/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-pencil-square\"})]});// --- Логика Рендеринга ---\nif(isLoadingProfile){return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F...\"}),profileError&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-2\",children:profileError})]});}if(profileError&&!currentUser){return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:profileError}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:loadProfile,children:\"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u043D\\u043E\\u0432\\u0430\"})]});}if(needsProfileSetup&&currentUser){return/*#__PURE__*/_jsx(ProfileModal,{currentName:''// При первой настройке поле имени должно быть пустым\n,onSubmit:handleProfileSubmit,error:profileError,isInitialSetup:true});}const renderMainApp=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center mb-3\",children:[currentUser&&/*#__PURE__*/_jsxs(\"span\",{className:\"me-auto\",children:[\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \",currentUser.effective_display_name,\"!\"]}),currentUser&&/*#__PURE__*/_jsx(EditProfileButton,{})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"nav nav-tabs mb-4\",id:\"bookingTabs\",role:\"tablist\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{className:`nav-link ${activeTab==='book'?'active':''}`,onClick:()=>handleTabClick('book'),children:\"\\u0417\\u0430\\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{className:`nav-link ${activeTab==='my-bookings'?'active':''}`,onClick:()=>handleTabClick('my-bookings'),children:\"\\u041C\\u043E\\u0438 \\u0431\\u0440\\u043E\\u043D\\u0438\"})}),IS_ADMIN&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",role:\"presentation\",children:/*#__PURE__*/_jsx(\"button\",{className:`nav-link ${activeTab==='admin'?'active':''}`,onClick:()=>handleTabClick('admin'),children:\"\\u0410\\u0434\\u043C\\u0438\\u043D\\u043A\\u0430\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",children:[activeTab==='book'&&/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade show active\",children:/*#__PURE__*/_jsx(BookingTab,{})}),activeTab==='my-bookings'&&/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade show active\",children:/*#__PURE__*/_jsx(MyBookingsTab,{})}),IS_ADMIN&&activeTab==='admin'&&/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade show active\",children:/*#__PURE__*/_jsx(AdminTab,{})})]})]});if(showEditProfileModal&&currentUser){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{opacity:0.3,pointerEvents:'none'},children:[renderMainApp(),\" \"]}),/*#__PURE__*/_jsx(ProfileModal,{currentName:currentUser.display_name||'',onSubmit:handleProfileSubmit,onClose:()=>{setShowEditProfileModal(false);setProfileError('');},error:profileError,isInitialSetup:false})]});}if(currentUser&&!needsProfileSetup){return/*#__PURE__*/_jsx(UserContext.Provider,{value:currentUser,children:renderMainApp()});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-4 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u0418\\u043D\\u0438\\u0446\\u0438\\u0430\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F...\"}),\" \",profileError&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mt-2\",children:profileError})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","BookingTab","MyBookingsTab","AdminTab","ProfileModal","fetchUserProfile","updateUserProfile","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserContext","createContext","App","_window$Telegram","_window$Telegram$WebA","_window$Telegram$WebA2","_window$Telegram$WebA3","activeTab","setActiveTab","currentUser","setCurrentUser","needsProfileSetup","setNeedsProfileSetup","showEditProfileModal","setShowEditProfileModal","profileError","setProfileError","isLoadingProfile","setIsLoadingProfile","TG_ID_RAW","window","Telegram","WebApp","initDataUnsafe","user","id","TG_ID","parseInt","ADMIN_IDS","Set","IS_ADMIN","has","loadProfile","console","log","userProfile","display_name","error","message","ready","warn","handleProfileSubmit","newName","updatedProfile","handleTabClick","tabName","EditProfileButton","className","onClick","title","children","effective_display_name","currentName","onSubmit","isInitialSetup","renderMainApp","role","style","opacity","pointerEvents","onClose","Provider","value"],"sources":["C:/Users/A.Ryazanov/book/front/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport BookingTab from './components/BookingTab';\nimport MyBookingsTab from './components/MyBookingsTab';\nimport AdminTab from './components/AdminTab';\nimport ProfileModal from './components/ProfileModal';\nimport { fetchUserProfile, updateUserProfile } from './api';\n\nexport const UserContext = React.createContext(null);\n\nconst App = () => {\n  const [activeTab, setActiveTab] = useState('book');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [needsProfileSetup, setNeedsProfileSetup] = useState(false);\n  const [showEditProfileModal, setShowEditProfileModal] = useState(false);\n  const [profileError, setProfileError] = useState('');\n  const [isLoadingProfile, setIsLoadingProfile] = useState(true);\n\n  const TG_ID_RAW = window.Telegram?.WebApp?.initDataUnsafe?.user?.id;\n  const TG_ID = TG_ID_RAW ? parseInt(TG_ID_RAW, 10) : 123456789;\n  const ADMIN_IDS = new Set([860936779, 123456789]);\n  const IS_ADMIN = ADMIN_IDS.has(TG_ID);\n\n  const loadProfile = useCallback(async () => {\n    setIsLoadingProfile(true);\n    setProfileError('');\n    setNeedsProfileSetup(false);\n    setShowEditProfileModal(false);\n    try {\n      console.log(\"Fetching user profile...\");\n      const userProfile = await fetchUserProfile();\n      console.log(\"User profile fetched:\", userProfile);\n      setCurrentUser(userProfile);\n      \n      // ОБНОВЛЕННАЯ ЛОГИКА: Обязательная настройка, если display_name пуст\n      if (!userProfile.display_name) {\n        console.log(\"User display_name is missing, needs setup.\");\n        setNeedsProfileSetup(true);\n      } else {\n        console.log(\"User display_name is present:\", userProfile.display_name);\n      }\n\n    } catch (error) {\n      console.error(\"Ошибка загрузки профиля:\", error);\n      setProfileError(`Не удалось загрузить профиль: ${error.message}. Попробуйте перезагрузить приложение.`);\n    } finally {\n      setIsLoadingProfile(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    // Инициализируем Telegram Web App для получения актуальных данных пользователя\n    if (window.Telegram && window.Telegram.WebApp) {\n        window.Telegram.WebApp.ready();\n        // Можно добавить задержку, если initDataUnsafe не сразу доступна\n        // setTimeout(loadProfile, 100); \n        loadProfile();\n    } else {\n        // Если не в Telegram, или для локальной разработки\n        console.warn(\"Telegram WebApp not found, using fallback for profile loading.\");\n        loadProfile();\n    }\n  }, [loadProfile]); // loadProfile теперь в зависимостях, но он useCallback\n\n  const handleProfileSubmit = async (newName) => {\n    setProfileError('');\n    try {\n      console.log(\"Submitting new profile name:\", newName);\n      const updatedProfile = await updateUserProfile(newName);\n      console.log(\"Profile updated:\", updatedProfile);\n      setCurrentUser(updatedProfile);\n      setNeedsProfileSetup(false); \n      setShowEditProfileModal(false);\n    } catch (error) {\n      console.error(\"Ошибка обновления профиля:\", error);\n      setProfileError(error.message || 'Не удалось сохранить имя. Попробуйте еще раз.');\n    }\n  };\n  \n  const handleTabClick = (tabName) => {\n    setActiveTab(tabName);\n  };\n\n  const EditProfileButton = () => (\n    <button \n      className=\"btn btn-sm btn-outline-secondary ms-auto\" \n      onClick={() => {\n        setProfileError('');\n        setShowEditProfileModal(true);\n      }}\n      title=\"Редактировать имя\"\n    >\n      {currentUser?.effective_display_name || 'Профиль'} <i className=\"bi bi-pencil-square\"></i>\n    </button>\n  );\n\n  // --- Логика Рендеринга ---\n\n  if (isLoadingProfile) {\n    return (\n      <div className=\"container py-4 text-center\">\n        <p>Загрузка данных пользователя...</p>\n        {profileError && <div className=\"alert alert-danger mt-2\">{profileError}</div>}\n      </div>\n    );\n  }\n\n  if (profileError && !currentUser) {\n    return (\n      <div className=\"container py-4 text-center\">\n        <div className=\"alert alert-danger\">{profileError}</div>\n        <button className=\"btn btn-primary\" onClick={loadProfile}>Попробовать снова</button>\n      </div>\n    );\n  }\n  \n  if (needsProfileSetup && currentUser) {\n    return (\n      <ProfileModal\n        currentName={''} // При первой настройке поле имени должно быть пустым\n        onSubmit={handleProfileSubmit}\n        error={profileError}\n        isInitialSetup={true}\n      />\n    );\n  }\n\n  const renderMainApp = () => (\n    <div className=\"container py-4\">\n      <div className=\"d-flex align-items-center mb-3\">\n        {currentUser && <span className=\"me-auto\">Привет, {currentUser.effective_display_name}!</span>}\n        {/* Если EditProfileButton здесь, то его объявление тоже должно быть выше или currentUser должен быть доступен */}\n        {currentUser && <EditProfileButton />} \n      </div>\n\n      <ul className=\"nav nav-tabs mb-4\" id=\"bookingTabs\" role=\"tablist\">\n        {/* ... ваши вкладки ... */}\n        <li className=\"nav-item\" role=\"presentation\">\n            <button className={`nav-link ${activeTab === 'book' ? 'active' : ''}`} onClick={() => handleTabClick('book')}>\n              Забронировать\n            </button>\n        </li>\n        <li className=\"nav-item\" role=\"presentation\">\n            <button className={`nav-link ${activeTab === 'my-bookings' ? 'active' : ''}`} onClick={() => handleTabClick('my-bookings')}>\n              Мои брони\n            </button>\n        </li>\n        {IS_ADMIN && (\n        <li className=\"nav-item\" role=\"presentation\">\n            <button className={`nav-link ${activeTab === 'admin' ? 'active' : ''}`} onClick={() => handleTabClick('admin')}>\n              Админка\n            </button>\n        </li>\n        )}\n      </ul>\n\n      <div className=\"tab-content\">\n        {activeTab === 'book' && <div className=\"tab-pane fade show active\"><BookingTab /></div>}\n        {activeTab === 'my-bookings' && <div className=\"tab-pane fade show active\"><MyBookingsTab /></div>}\n        {IS_ADMIN && activeTab === 'admin' && <div className=\"tab-pane fade show active\"><AdminTab /></div>}\n      </div>\n    </div>\n  );\n\n  if (showEditProfileModal && currentUser) {\n    return (\n      <>\n        {/* Если модалка поверх, то фон рендерится */}\n        <div style={{ opacity: 0.3, pointerEvents: 'none' }}>\n          {renderMainApp()} {/* ВЫЗОВ renderMainApp */}\n        </div>\n        <ProfileModal\n          currentName={currentUser.display_name || ''}\n          onSubmit={handleProfileSubmit}\n          onClose={() => {\n            setShowEditProfileModal(false);\n            setProfileError('');\n          }}\n          error={profileError}\n          isInitialSetup={false}\n        />\n      </>\n    );\n  }\n\n  if (currentUser && !needsProfileSetup) {\n    return (\n      <UserContext.Provider value={currentUser}>\n        {renderMainApp()}\n      </UserContext.Provider>\n    );\n  }\n\n  return (\n    <div className=\"container py-4 text-center\">\n      <p>Инициализация...</p> {/* Более общее сообщение, пока все условия не выполнятся */}\n      {profileError && <div className=\"alert alert-danger mt-2\">{profileError}</div>}\n    </div>\n  );\n};\n \nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}