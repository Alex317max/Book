{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\A.Ryazanov\\\\book_test\\\\front\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// src/App.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport BookingTab from './components/BookingTab';\nimport MyBookingsTab from './components/MyBookingsTab';\nimport AdminTab from './components/AdminTab';\nimport ProfileModal from './components/ProfileModal';\nimport { fetchUserProfile, updateUserProfile } from './api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/React.createContext(null);\nconst App = () => {\n  _s();\n  var _window$Telegram, _window$Telegram$WebA, _window$Telegram$WebA2, _window$Telegram$WebA3;\n  const [activeTab, setActiveTab] = useState('book');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [needsProfileSetup, setNeedsProfileSetup] = useState(false);\n  const [showEditProfileModal, setShowEditProfileModal] = useState(false);\n  const [profileError, setProfileError] = useState('');\n  const [isLoadingProfile, setIsLoadingProfile] = useState(true);\n  const TG_ID_RAW = (_window$Telegram = window.Telegram) === null || _window$Telegram === void 0 ? void 0 : (_window$Telegram$WebA = _window$Telegram.WebApp) === null || _window$Telegram$WebA === void 0 ? void 0 : (_window$Telegram$WebA2 = _window$Telegram$WebA.initDataUnsafe) === null || _window$Telegram$WebA2 === void 0 ? void 0 : (_window$Telegram$WebA3 = _window$Telegram$WebA2.user) === null || _window$Telegram$WebA3 === void 0 ? void 0 : _window$Telegram$WebA3.id;\n  const TG_ID = TG_ID_RAW ? parseInt(TG_ID_RAW, 10) : 123456789;\n  const ADMIN_IDS = new Set([860936779, 123456789]);\n  const IS_ADMIN = ADMIN_IDS.has(TG_ID);\n  const loadProfile = useCallback(async () => {\n    setIsLoadingProfile(true);\n    setProfileError('');\n    setNeedsProfileSetup(false);\n    setShowEditProfileModal(false);\n    try {\n      console.log(\"Fetching user profile...\");\n      const userProfile = await fetchUserProfile();\n      console.log(\"User profile fetched:\", userProfile);\n      setCurrentUser(userProfile);\n\n      // ОБНОВЛЕННАЯ ЛОГИКА: Обязательная настройка, если display_name пуст\n      if (!userProfile.display_name) {\n        console.log(\"User display_name is missing, needs setup.\");\n        setNeedsProfileSetup(true);\n      } else {\n        console.log(\"User display_name is present:\", userProfile.display_name);\n      }\n    } catch (error) {\n      console.error(\"Ошибка загрузки профиля:\", error);\n      setProfileError(`Не удалось загрузить профиль: ${error.message}. Попробуйте перезагрузить приложение.`);\n    } finally {\n      setIsLoadingProfile(false);\n    }\n  }, []);\n  useEffect(() => {\n    // Инициализируем Telegram Web App для получения актуальных данных пользователя\n    if (window.Telegram && window.Telegram.WebApp) {\n      window.Telegram.WebApp.ready();\n      // Можно добавить задержку, если initDataUnsafe не сразу доступна\n      // setTimeout(loadProfile, 100); \n      loadProfile();\n    } else {\n      // Если не в Telegram, или для локальной разработки\n      console.warn(\"Telegram WebApp not found, using fallback for profile loading.\");\n      loadProfile();\n    }\n  }, [loadProfile]); // loadProfile теперь в зависимостях, но он useCallback\n\n  const handleProfileSubmit = async newName => {\n    setProfileError('');\n    try {\n      console.log(\"Submitting new profile name:\", newName);\n      const updatedProfile = await updateUserProfile(newName);\n      console.log(\"Profile updated:\", updatedProfile);\n      setCurrentUser(updatedProfile);\n      setNeedsProfileSetup(false);\n      setShowEditProfileModal(false);\n    } catch (error) {\n      console.error(\"Ошибка обновления профиля:\", error);\n      setProfileError(error.message || 'Не удалось сохранить имя. Попробуйте еще раз.');\n    }\n  };\n  const handleTabClick = tabName => {\n    setActiveTab(tabName);\n  };\n  const EditProfileButton = () => /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"btn btn-sm btn-outline-secondary ms-auto\",\n    onClick: () => {\n      setProfileError('');\n      setShowEditProfileModal(true);\n    },\n    title: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0438\\u043C\\u044F\",\n    children: [(currentUser === null || currentUser === void 0 ? void 0 : currentUser.effective_display_name) || 'Профиль', \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"bi bi-pencil-square\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 58\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n\n  // --- Логика Рендеринга ---\n\n  if (isLoadingProfile) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-4 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), profileError && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger mt-2\",\n        children: profileError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this);\n  }\n  if (profileError && !currentUser) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container py-4 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-danger\",\n        children: profileError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary\",\n        onClick: loadProfile,\n        children: \"\\u041F\\u043E\\u043F\\u0440\\u043E\\u0431\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u043D\\u043E\\u0432\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this);\n  }\n  if (needsProfileSetup && currentUser) {\n    return /*#__PURE__*/_jsxDEV(ProfileModal, {\n      currentName: '' // При первой настройке поле имени должно быть пустым\n      ,\n      onSubmit: handleProfileSubmit,\n      error: profileError,\n      isInitialSetup: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n  const renderMainApp = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center mb-3\",\n      children: [currentUser && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"me-auto\",\n        children: [\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \", currentUser.effective_display_name, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }, this), currentUser && /*#__PURE__*/_jsxDEV(EditProfileButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"nav nav-tabs mb-4\",\n      id: \"bookingTabs\",\n      role: \"tablist\",\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        role: \"presentation\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `nav-link ${activeTab === 'book' ? 'active' : ''}`,\n          onClick: () => handleTabClick('book'),\n          children: \"\\u0417\\u0430\\u0431\\u0440\\u043E\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        role: \"presentation\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `nav-link ${activeTab === 'my-bookings' ? 'active' : ''}`,\n          onClick: () => handleTabClick('my-bookings'),\n          children: \"\\u041C\\u043E\\u0438 \\u0431\\u0440\\u043E\\u043D\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this), IS_ADMIN && /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        role: \"presentation\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `nav-link ${activeTab === 'admin' ? 'active' : ''}`,\n          onClick: () => handleTabClick('admin'),\n          children: \"\\u0410\\u0434\\u043C\\u0438\\u043D\\u043A\\u0430\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-content\",\n      children: [activeTab === 'book' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade show active\",\n        children: /*#__PURE__*/_jsxDEV(BookingTab, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 77\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 34\n      }, this), activeTab === 'my-bookings' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade show active\",\n        children: /*#__PURE__*/_jsxDEV(MyBookingsTab, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 84\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 41\n      }, this), IS_ADMIN && activeTab === 'admin' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade show active\",\n        children: /*#__PURE__*/_jsxDEV(AdminTab, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 90\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 47\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 5\n  }, this);\n  if (showEditProfileModal && currentUser) {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          opacity: 0.3,\n          pointerEvents: 'none'\n        },\n        children: [renderMainApp(), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ProfileModal, {\n        currentName: currentUser.display_name || '',\n        onSubmit: handleProfileSubmit,\n        onClose: () => {\n          setShowEditProfileModal(false);\n          setProfileError('');\n        },\n        error: profileError,\n        isInitialSetup: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n  if (currentUser && !needsProfileSetup) {\n    return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n      value: currentUser,\n      children: renderMainApp()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-4 text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u0418\\u043D\\u0438\\u0446\\u0438\\u0430\\u043B\\u0438\\u0437\\u0430\\u0446\\u0438\\u044F...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), \" \", profileError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger mt-2\",\n      children: profileError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 24\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 195,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"Q9AXTxknTiLMMiqDtq09Ill2/bA=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","BookingTab","MyBookingsTab","AdminTab","ProfileModal","fetchUserProfile","updateUserProfile","jsxDEV","_jsxDEV","Fragment","_Fragment","UserContext","createContext","App","_s","_window$Telegram","_window$Telegram$WebA","_window$Telegram$WebA2","_window$Telegram$WebA3","activeTab","setActiveTab","currentUser","setCurrentUser","needsProfileSetup","setNeedsProfileSetup","showEditProfileModal","setShowEditProfileModal","profileError","setProfileError","isLoadingProfile","setIsLoadingProfile","TG_ID_RAW","window","Telegram","WebApp","initDataUnsafe","user","id","TG_ID","parseInt","ADMIN_IDS","Set","IS_ADMIN","has","loadProfile","console","log","userProfile","display_name","error","message","ready","warn","handleProfileSubmit","newName","updatedProfile","handleTabClick","tabName","EditProfileButton","className","onClick","title","children","effective_display_name","fileName","_jsxFileName","lineNumber","columnNumber","currentName","onSubmit","isInitialSetup","renderMainApp","role","style","opacity","pointerEvents","onClose","Provider","value","_c","$RefreshReg$"],"sources":["C:/Users/A.Ryazanov/book_test/front/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport BookingTab from './components/BookingTab';\nimport MyBookingsTab from './components/MyBookingsTab';\nimport AdminTab from './components/AdminTab';\nimport ProfileModal from './components/ProfileModal';\nimport { fetchUserProfile, updateUserProfile } from './api';\n\nexport const UserContext = React.createContext(null);\n\nconst App = () => {\n  const [activeTab, setActiveTab] = useState('book');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [needsProfileSetup, setNeedsProfileSetup] = useState(false);\n  const [showEditProfileModal, setShowEditProfileModal] = useState(false);\n  const [profileError, setProfileError] = useState('');\n  const [isLoadingProfile, setIsLoadingProfile] = useState(true);\n\n  const TG_ID_RAW = window.Telegram?.WebApp?.initDataUnsafe?.user?.id;\n  const TG_ID = TG_ID_RAW ? parseInt(TG_ID_RAW, 10) : 123456789;\n  const ADMIN_IDS = new Set([860936779, 123456789]);\n  const IS_ADMIN = ADMIN_IDS.has(TG_ID);\n\n  const loadProfile = useCallback(async () => {\n    setIsLoadingProfile(true);\n    setProfileError('');\n    setNeedsProfileSetup(false);\n    setShowEditProfileModal(false);\n    try {\n      console.log(\"Fetching user profile...\");\n      const userProfile = await fetchUserProfile();\n      console.log(\"User profile fetched:\", userProfile);\n      setCurrentUser(userProfile);\n      \n      // ОБНОВЛЕННАЯ ЛОГИКА: Обязательная настройка, если display_name пуст\n      if (!userProfile.display_name) {\n        console.log(\"User display_name is missing, needs setup.\");\n        setNeedsProfileSetup(true);\n      } else {\n        console.log(\"User display_name is present:\", userProfile.display_name);\n      }\n\n    } catch (error) {\n      console.error(\"Ошибка загрузки профиля:\", error);\n      setProfileError(`Не удалось загрузить профиль: ${error.message}. Попробуйте перезагрузить приложение.`);\n    } finally {\n      setIsLoadingProfile(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    // Инициализируем Telegram Web App для получения актуальных данных пользователя\n    if (window.Telegram && window.Telegram.WebApp) {\n        window.Telegram.WebApp.ready();\n        // Можно добавить задержку, если initDataUnsafe не сразу доступна\n        // setTimeout(loadProfile, 100); \n        loadProfile();\n    } else {\n        // Если не в Telegram, или для локальной разработки\n        console.warn(\"Telegram WebApp not found, using fallback for profile loading.\");\n        loadProfile();\n    }\n  }, [loadProfile]); // loadProfile теперь в зависимостях, но он useCallback\n\n  const handleProfileSubmit = async (newName) => {\n    setProfileError('');\n    try {\n      console.log(\"Submitting new profile name:\", newName);\n      const updatedProfile = await updateUserProfile(newName);\n      console.log(\"Profile updated:\", updatedProfile);\n      setCurrentUser(updatedProfile);\n      setNeedsProfileSetup(false); \n      setShowEditProfileModal(false);\n    } catch (error) {\n      console.error(\"Ошибка обновления профиля:\", error);\n      setProfileError(error.message || 'Не удалось сохранить имя. Попробуйте еще раз.');\n    }\n  };\n  \n  const handleTabClick = (tabName) => {\n    setActiveTab(tabName);\n  };\n\n  const EditProfileButton = () => (\n    <button \n      className=\"btn btn-sm btn-outline-secondary ms-auto\" \n      onClick={() => {\n        setProfileError('');\n        setShowEditProfileModal(true);\n      }}\n      title=\"Редактировать имя\"\n    >\n      {currentUser?.effective_display_name || 'Профиль'} <i className=\"bi bi-pencil-square\"></i>\n    </button>\n  );\n\n  // --- Логика Рендеринга ---\n\n  if (isLoadingProfile) {\n    return (\n      <div className=\"container py-4 text-center\">\n        <p>Загрузка данных пользователя...</p>\n        {profileError && <div className=\"alert alert-danger mt-2\">{profileError}</div>}\n      </div>\n    );\n  }\n\n  if (profileError && !currentUser) {\n    return (\n      <div className=\"container py-4 text-center\">\n        <div className=\"alert alert-danger\">{profileError}</div>\n        <button className=\"btn btn-primary\" onClick={loadProfile}>Попробовать снова</button>\n      </div>\n    );\n  }\n  \n  if (needsProfileSetup && currentUser) {\n    return (\n      <ProfileModal\n        currentName={''} // При первой настройке поле имени должно быть пустым\n        onSubmit={handleProfileSubmit}\n        error={profileError}\n        isInitialSetup={true}\n      />\n    );\n  }\n\n  const renderMainApp = () => (\n    <div className=\"container py-4\">\n      <div className=\"d-flex align-items-center mb-3\">\n        {currentUser && <span className=\"me-auto\">Привет, {currentUser.effective_display_name}!</span>}\n        {/* Если EditProfileButton здесь, то его объявление тоже должно быть выше или currentUser должен быть доступен */}\n        {currentUser && <EditProfileButton />} \n      </div>\n\n      <ul className=\"nav nav-tabs mb-4\" id=\"bookingTabs\" role=\"tablist\">\n        {/* ... ваши вкладки ... */}\n        <li className=\"nav-item\" role=\"presentation\">\n            <button className={`nav-link ${activeTab === 'book' ? 'active' : ''}`} onClick={() => handleTabClick('book')}>\n              Забронировать\n            </button>\n        </li>\n        <li className=\"nav-item\" role=\"presentation\">\n            <button className={`nav-link ${activeTab === 'my-bookings' ? 'active' : ''}`} onClick={() => handleTabClick('my-bookings')}>\n              Мои брони\n            </button>\n        </li>\n        {IS_ADMIN && (\n        <li className=\"nav-item\" role=\"presentation\">\n            <button className={`nav-link ${activeTab === 'admin' ? 'active' : ''}`} onClick={() => handleTabClick('admin')}>\n              Админка\n            </button>\n        </li>\n        )}\n      </ul>\n\n      <div className=\"tab-content\">\n        {activeTab === 'book' && <div className=\"tab-pane fade show active\"><BookingTab /></div>}\n        {activeTab === 'my-bookings' && <div className=\"tab-pane fade show active\"><MyBookingsTab /></div>}\n        {IS_ADMIN && activeTab === 'admin' && <div className=\"tab-pane fade show active\"><AdminTab /></div>}\n      </div>\n    </div>\n  );\n\n  if (showEditProfileModal && currentUser) {\n    return (\n      <>\n        {/* Если модалка поверх, то фон рендерится */}\n        <div style={{ opacity: 0.3, pointerEvents: 'none' }}>\n          {renderMainApp()} {/* ВЫЗОВ renderMainApp */}\n        </div>\n        <ProfileModal\n          currentName={currentUser.display_name || ''}\n          onSubmit={handleProfileSubmit}\n          onClose={() => {\n            setShowEditProfileModal(false);\n            setProfileError('');\n          }}\n          error={profileError}\n          isInitialSetup={false}\n        />\n      </>\n    );\n  }\n\n  if (currentUser && !needsProfileSetup) {\n    return (\n      <UserContext.Provider value={currentUser}>\n        {renderMainApp()}\n      </UserContext.Provider>\n    );\n  }\n\n  return (\n    <div className=\"container py-4 text-center\">\n      <p>Инициализация...</p> {/* Более общее сообщение, пока все условия не выполнятся */}\n      {profileError && <div className=\"alert alert-danger mt-2\">{profileError}</div>}\n    </div>\n  );\n};\n \nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}